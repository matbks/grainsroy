sap.ui.define([                                                                                                                                                                                                                                                
    "./BaseController",                                                                                                                                                                                                                                        
    "sap/ui/core/Fragment",                                                                                                                                                                                                                                    
    "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                             
    "sap/ui/model/Filter",                                                                                                                                                                                                                                     
    "sap/ui/model/FilterOperator",                                                                                                                                                                                                                             
    "sap/m/MessageBox",                                                                                                                                                                                                                                        
    "sap/m/MessageToast",                                                                                                                                                                                                                                      
    "../model/formatter",                                                                                                                                                                                                                                      
    "../model/models",                                                                                                                                                                                                                                         
], function (                                                                                                                                                                                                                                                  
    BaseController,                                                                                                                                                                                                                                            
	Fragment,                                                                                                                                                                                                                                                     
	JSONModel,                                                                                                                                                                                                                                                    
	Filter,                                                                                                                                                                                                                                                       
	FilterOperator,                                                                                                                                                                                                                                               
	MessageBox,                                                                                                                                                                                                                                                   
	MessageToast,                                                                                                                                                                                                                                                 
	formatter,                                                                                                                                                                                                                                                    
	models,                                                                                                                                                                                                                                                       
) {                                                                                                                                                                                                                                                            
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    return BaseController.extend("grains.zadograinsacmcontrolling.controller.ContractDetails", {                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * @override                                                                                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        formatter: formatter,                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        onInit: function () {                                                                                                                                                                                                                                  
            this.initMessageProcessor();                                                                                                                                                                                                                       
            this.getRouter().attachRoutePatternMatched(this._onObjectMathed, this)                                                                                                                                                                             
            this.getView().addEventDelegate({                                                                                                                                                                                                                  
                onAfterShow: function () {                                                                                                                                                                                                                     
                }.bind(this)                                                                                                                                                                                                                                   
            })                                                                                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
        _onObjectMathed: function (oEvent) {                                                                                                                                                                                                                   
            this._Contract = oEvent.getParameter("arguments").Contract                                                                                                                                                                                         
            this._getMonitorBehavior()                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
        _getMonitorBehavior: function () {                                                                                                                                                                                                                     
            let sPath = this.getStorage("SelectedPath")                                                                                                                                                                                                        
            this.getModel().read(sPath.Path, {                                                                                                                                                                                                                 
                success: function (oData) {                                                                                                                                                                                                                    
                    this.getOwnerComponent().setModel(new JSONModel(oData), "ContractDetailsModel")                                                                                                                                                            
                    this.getModel().read("/ZADOC_GRAINS_MON_BEHAVIOR", {                                                                                                                                                                                       
                        filters: [                                                                                                                                                                                                                             
                            new Filter("CompanyCode", FilterOperator.EQ, oData.CompanyCode),                                                                                                                                                                   
                            new Filter("AppCode", FilterOperator.EQ, 'ACMCONTROL'),                                                                                                                                                                            
                            new Filter("ContractType", FilterOperator.EQ, oData.TradingContractType)                                                                                                                                                           
                        ],                                                                                                                                                                                                                                     
                        success: function (oData) {                                                                                                                                                                                                            
                            this.getOwnerComponent().getModel("ViewConfigurations").setData(oData.results[0] != undefined ? oData.results[0] : models.createLineConfigurationsModel())                                                                         
                            this.refreshModel("ViewConfigurations")                                                                                                                                                                                            
                            this._getViewData()                                                                                                                                                                                                                
                        }.bind(this),                                                                                                                                                                                                                          
                        error: function () {                                                                                                                                                                                                                   
                        }                                                                                                                                                                                                                                      
                    })                                                                                                                                                                                                                                         
                }.bind(this),                                                                                                                                                                                                                                  
                error: function () {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                }                                                                                                                                                                                                                                              
            })                                                                                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onFixationPress: function (oEvent) {                                                                                                                                                                                                                   
            this._SelectedFixation = this.getView().getModel().getData(oEvent.oSource._aSelectedPaths[0])                                                                                                                                                      
            this.putStorage("Fixation", {                                                                                                                                                                                                                      
                sPath: oEvent.oSource._aSelectedPaths[0]                                                                                                                                                                                                       
            })                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            this.byId("TableFixations").removeSelections()                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
            if (this.getView().getModel().getData(this.getView().getObjectBinding().sPath).Type == "ZC") {                                                                                                                                                     
                this.getRouter().navTo("RouteContractFixation", {                                                                                                                                                                                              
                    Contract: this._Contract,                                                                                                                                                                                                                  
                    Fixation: this._SelectedFixation.FixationId,                                                                                                                                                                                               
                })                                                                                                                                                                                                                                             
            } else {                                                                                                                                                                                                                                           
                this.getRouter().navTo("RouteSalesContractFixation", {                                                                                                                                                                                         
                    Contract: this._Contract,                                                                                                                                                                                                                  
                    Fixation: this._SelectedFixation.FixationId,                                                                                                                                                                                               
                })                                                                                                                                                                                                                                             
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
        onCreateFixation: function (oEvent) {                                                                                                                                                                                                                  
            let oObject = oEvent.getSource().getBindingContext().getObject()                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            let Authorization = {                                                                                                                                                                                                                              
                Company_Code: oObject.CompanyCode,                                                                                                                                                                                                             
                Plant: oObject.Plant,                                                                                                                                                                                                                          
                Authorization: "FIX_CRT"                                                                                                                                                                                                                       
            }                                                                                                                                                                                                                                                  
            this.authValidate(Authorization).then(() => {                                                                                                                                                                                                      
                if (oObject.ContractStatus == 'L' || oObject.ContractStatus == 'T') {                                                                                                                                                                          
                    if (this.getView().getModel().getData(this.getView().getObjectBinding().sPath).Type == "ZC") {                                                                                                                                             
                        this.getRouter().navTo("RouteContractFixation", {                                                                                                                                                                                      
                            Contract: this._Contract,                                                                                                                                                                                                          
                            Fixation: '',                                                                                                                                                                                                                      
                        })                                                                                                                                                                                                                                     
                    } else {                                                                                                                                                                                                                                   
                        this.getRouter().navTo("RouteSalesContractFixation", {                                                                                                                                                                                 
                            Contract: this._Contract,                                                                                                                                                                                                          
                            Fixation: '',                                                                                                                                                                                                                      
                        })                                                                                                                                                                                                                                     
                    }                                                                                                                                                                                                                                          
                } else {                                                                                                                                                                                                                                       
                    MessageBox.show("O contrato não encontra-se em um status válido para realizar a fixação", {                                                                                                                                                
                        icon: MessageBox.Icon.INFORMATION,                                                                                                                                                                                                     
                        title: "Aviso"                                                                                                                                                                                                                         
                    })                                                                                                                                                                                                                                         
                }                                                                                                                                                                                                                                              
            }).catch(() => {                                                                                                                                                                                                                                   
                MessageBox.show("Usuário não possui permissão para realizar a fixação", {                                                                                                                                                                      
                    icon: MessageBox.Icon.INFORMATION,                                                                                                                                                                                                         
                    title: "Aviso"                                                                                                                                                                                                                             
                })                                                                                                                                                                                                                                             
            })                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onContractFlow: function (oEvent) {                                                                                                                                                                                                                    
            if (!this._FlowFragment) {                                                                                                                                                                                                                         
                this._FlowFragment = Fragment.load({                                                                                                                                                                                                           
                    id: this.getView().getId(),                                                                                                                                                                                                                
                    name: "grains.zadograinsacmcontrolling.view.fragments.ContractFlow",                                                                                                                                                                       
                    controller: this                                                                                                                                                                                                                           
                }).then(function (oValueHelpDialog) {                                                                                                                                                                                                          
                    this.getView().addDependent(oValueHelpDialog);                                                                                                                                                                                             
                    return oValueHelpDialog;                                                                                                                                                                                                                   
                }.bind(this));                                                                                                                                                                                                                                 
            }                                                                                                                                                                                                                                                  
            this._FlowFragment.then(function (oValueHelpDialog) {                                                                                                                                                                                              
                oValueHelpDialog.open();                                                                                                                                                                                                                       
            });                                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onGrainsBalances: function (oEvent) {                                                                                                                                                                                                                  
            let ContractData = oEvent.getSource().getBindingContext().getObject()                                                                                                                                                                              
            let Contract = ContractData.ContractNum                                                                                                                                                                                                            
            let Partner = ContractData.Partner                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            let TCode = "ZTACM0025"&nbsp;                                                                                                                                                                                                                      
            let Host = `https://${window.location.hostname}:${window.location.port}`                                                                                                                                                                           
            let App = `/sap/bc/gui/sap/its/webgui?&saml2=disabled&~transaction=${TCode}`                                                                                                                                                                       
            let Parameters = `&%20S_TKONN-LOW=${Contract}&%20S_ELIFN-LOW=${Partner}&~OKCODE=ENTE`                                                                                                                                                              
                                                                                                                                                                                                                                                               
            let Url = Host + App + Parameters&nbsp;                                                                                                                                                                                                            
            sap.m.URLHelper.redirect(Url)&nbsp;                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onContractBalances: function () {                                                                                                                                                                                                                      
            if (!this._BalanceFragment) {                                                                                                                                                                                                                      
                this._BalanceFragment = Fragment.load({                                                                                                                                                                                                        
                    id: this.getView().getId(),                                                                                                                                                                                                                
                    name: "grains.zadograinsacmcontrolling.view.fragments.Balance",                                                                                                                                                                            
                    controller: this                                                                                                                                                                                                                           
                }).then(function (oValueHelpDialog) {                                                                                                                                                                                                          
                    this.getView().addDependent(oValueHelpDialog);                                                                                                                                                                                             
                    return oValueHelpDialog;                                                                                                                                                                                                                   
                }.bind(this));                                                                                                                                                                                                                                 
            }                                                                                                                                                                                                                                                  
            this._BalanceFragment.then(function (oValueHelpDialog) {                                                                                                                                                                                           
                this.byId("BalanceSmartList").setBindingContext(this._oContext)                                                                                                                                                                                
                oValueHelpDialog.open();                                                                                                                                                                                                                       
            }.bind(this));                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _getViewData: function () {                                                                                                                                                                                                                            
            let sPath = this.getStorage("SelectedPath")                                                                                                                                                                                                        
            this.getView().bindElement(sPath.Path)                                                                                                                                                                                                             
            this._oContext = new sap.ui.model.Context(this.getOwnerComponent().getModel(), sPath.Path)                                                                                                                                                         
            this.byId("SmartTableFixations").setBindingContext(this._oContext)                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onContractEdit: function (oEvent) {                                                                                                                                                                                                                    
            // let oCrossAppNavigator = sap.ushell.Container.getService("CrossApplicationNavigation")                                                                                                                                                          
            // var hash = (oCrossAppNavigator && oCrossAppNavigator.hrefForExternal({                                                                                                                                                                          
            //     target: {                                                                                                                                                                                                                                   
            //         semanticObject: "TradingContract",                                                                                                                                                                                                      
            //         action: "change"                                                                                                                                                                                                                        
            //     },                                                                                                                                                                                                                                          
            //     params: {                                                                                                                                                                                                                                   
            //         "TradingContract": this._Contract                                                                                                                                                                                                       
            //     }                                                                                                                                                                                                                                           
            // })) || ""                                                                                                                                                                                                                                       
            // oCrossAppNavigator.toExternal({                                                                                                                                                                                                                 
            //     target: {                                                                                                                                                                                                                                   
            //         shellHash: hash                                                                                                                                                                                                                         
            //     }                                                                                                                                                                                                                                           
            // })                                                                                                                                                                                                                                              
            // let ContractData = oEvent.getSource().getBindingContext().getObject()                                                                                                                                                                           
            // let Contract = ContractData.Contract                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
            // let TCode = "WB22"&nbsp;                                                                                                                                                                                                                        
            // let Host = `https://${window.location.hostname}:${window.location.port}`                                                                                                                                                                        
            // let App = `/sap/bc/gui/sap/its/webgui?&saml2=disabled&~transaction=${TCode}`                                                                                                                                                                    
            // let Parameters = `&%20S_TKONN-LOW=${Contract}&~OKCODE=ENTE`                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
            // let Url = Host + App + Parameters&nbsp;                                                                                                                                                                                                         
            // sap.m.URLHelper.redirect(Url)                                                                                                                                                                                                                   
        },                                                                                                                                                                                                                                                     
        onRebindBlocksTable: function () {                                                                                                                                                                                                                     
            let sPath = this.getStorage("SelectedPath")                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
            this._oContext = new sap.ui.model.Context(this.getOwnerComponent().getModel(), sPath.Path)                                                                                                                                                         
            this.byId("SmartTableBlocks").setBindingContext(this._oContext)                                                                                                                                                                                    
        },                                                                                                                                                                                                                                                     
        onBlockPress: function (oEvent) {                                                                                                                                                                                                                      
            this._ContextBlockPath = new sap.ui.model.Context(this.getOwnerComponent().getModel(), oEvent.getSource().getSelectedContexts()[0].sPath)                                                                                                          
            this.byId("TableBlocks").removeSelections()                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
            if (!this._UnlocksFragment) {                                                                                                                                                                                                                      
                this._UnlocksFragment = Fragment.load({                                                                                                                                                                                                        
                    id: this.getView().getId(),                                                                                                                                                                                                                
                    name: "grains.zadograinsacmcontrolling.view.fragments.PartnerUnlocks",                                                                                                                                                                     
                    controller: this                                                                                                                                                                                                                           
                }).then(function (oValueHelpDialog) {                                                                                                                                                                                                          
                    this.getView().addDependent(oValueHelpDialog);                                                                                                                                                                                             
                    return oValueHelpDialog;                                                                                                                                                                                                                   
                }.bind(this));                                                                                                                                                                                                                                 
            }                                                                                                                                                                                                                                                  
            this._UnlocksFragment.then(function (oValueHelpDialog) {                                                                                                                                                                                           
                this.byId("UnlocksList").rebindList(true)                                                                                                                                                                                                      
                oValueHelpDialog.open();                                                                                                                                                                                                                       
            }.bind(this));                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
        onRebindUnlocks: function () {                                                                                                                                                                                                                         
            this.byId("UnlocksList").setBindingContext(this._ContextBlockPath)                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onGoToApprove: function (oEvent) {                                                                                                                                                                                                                     
            var oObject = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var additionalUrl = "&/Fixação/" + oObject.ContractNum + "-" + oObject.FixationId                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            this.callTransactionWithAdditionalURL(                                                                                                                                                                                                             
                "ZOILACMTRANSEMUL",                                                                                                                                                                                                                            
                "zacmmntcontragricaprov",                                                                                                                                                                                                                      
                additionalUrl                                                                                                                                                                                                                                  
            );                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
        onGoToClearing: function (oEvent) {                                                                                                                                                                                                                    
            var oObject = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var additionalUrl = "&/Invoice/" + oObject.ContractNum + "-" + oObject.AbdNumber                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            this.callTransactionWithAdditionalURL(                                                                                                                                                                                                             
                "ZOILACMTRANSEMUL",                                                                                                                                                                                                                            
                "zacmmntcontragricinvoicescomp",                                                                                                                                                                                                               
                additionalUrl                                                                                                                                                                                                                                  
            );                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onLiquidate: function (oEvent) {                                                                                                                                                                                                                       
            let oObject = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            let Authorization = {                                                                                                                                                                                                                              
                Company_Code: oObject.CompanyCode,                                                                                                                                                                                                             
                Plant: oObject.Plant,                                                                                                                                                                                                                          
                Authorization: "FIX_LIQ"                                                                                                                                                                                                                       
            };                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            this.authValidate(Authorization).then(() => {                                                                                                                                                                                                      
                sap.ui.core.BusyIndicator.show();                                                                                                                                                                                                              
                this._sendLiquidation(oObject).then((oSuccess) => {                                                                                                                                                                                            
                    let error = this.fillMessagesModel()                                                                                                                                                                                                       
                    this.MessageBarChangeVisible(true)                                                                                                                                                                                                         
                    sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                          
                    if (error) {                                                                                                                                                                                                                               
                        MessageToast.show("Aconteceram erros no processo, visualizar mensagens")                                                                                                                                                               
                    } else {                                                                                                                                                                                                                                   
                        MessageToast.show("Processo executado com sucesso!")                                                                                                                                                                                   
                    }                                                                                                                                                                                                                                          
                }).catch((oError) => {                                                                                                                                                                                                                         
                    console.log(oError);                                                                                                                                                                                                                       
                    let error = this.fillMessagesModel()                                                                                                                                                                                                       
                    this.MessageBarChangeVisible(true)                                                                                                                                                                                                         
                    sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                          
                    MessageToast.show("Houve um erro interno")                                                                                                                                                                                                 
                })                                                                                                                                                                                                                                             
            }).catch((oError) => {                                                                                                                                                                                                                             
                console.log(oError);                                                                                                                                                                                                                           
                MessageBox.show("Usuário não possui permissão para realizar a liquidação", {                                                                                                                                                                   
                    icon: MessageBox.Icon.INFORMATION,                                                                                                                                                                                                         
                    title: "Aviso"                                                                                                                                                                                                                             
                })                                                                                                                                                                                                                                             
            })                                                                                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _sendLiquidation: function (FixationData) {                                                                                                                                                                                                            
            return new Promise((resolve, reject) => {                                                                                                                                                                                                          
                var oModel = this.getView().getModel();                                                                                                                                                                                                        
                var oData = {                                                                                                                                                                                                                                  
                    Action: "LIQUIDATE",                                                                                                                                                                                                                       
                    Json: JSON.stringify([{                                                                                                                                                                                                                    
                        Contract: FixationData.ContractNum,                                                                                                                                                                                                    
                        Identification: FixationData.FixationId                                                                                                                                                                                                
                    }]),                                                                                                                                                                                                                                       
                    StructureName: "ZADOS_GRAINS_CREATE_FIXATION"                                                                                                                                                                                              
                }                                                                                                                                                                                                                                              
                this.clearMessageManager()                                                                                                                                                                                                                     
                oModel.create("/JsonCommunicationSet", oData, {                                                                                                                                                                                                
                    success: function (oData) {                                                                                                                                                                                                                
                        debugger;                                                                                                                                                                                                                              
                        var oSmartTable = this.byId("SmartTableFixations");                                                                                                                                                                                    
                        oSmartTable.rebindTable();                                                                                                                                                                                                             
                        resolve(oData)                                                                                                                                                                                                                         
                    }.bind(this),                                                                                                                                                                                                                              
                    error: function (oError) {                                                                                                                                                                                                                 
                        reject(oError)                                                                                                                                                                                                                         
                    }.bind(this)                                                                                                                                                                                                                               
                })                                                                                                                                                                                                                                             
            })                                                                                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onInvoicePost: function (oEvent) {                                                                                                                                                                                                                     
            var oModel = this.getView().getModel();                                                                                                                                                                                                            
            let oObject = oEvent.getSource().getBindingContext().getObject()                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            let Authorization = {                                                                                                                                                                                                                              
                Company_Code: oObject.CompanyCode,                                                                                                                                                                                                             
                Plant: oObject.Plant,                                                                                                                                                                                                                          
                Authorization: "FIX_LIQ"                                                                                                                                                                                                                       
            }                                                                                                                                                                                                                                                  
            this.authValidate(Authorization).then(() => {                                                                                                                                                                                                      
                sap.ui.core.BusyIndicator.show();                                                                                                                                                                                                              
                oModel.create("/JsonCommunicationSet", {                                                                                                                                                                                                       
                    Action: "INVOICEPST",                                                                                                                                                                                                                      
                    Json: JSON.stringify([{                                                                                                                                                                                                                    
                        settlement_group_id: oObject.SettlementGroupId,                                                                                                                                                                                        
                        settlement_doc_year: oObject.SettlementDocYear,                                                                                                                                                                                        
                    }]),                                                                                                                                                                                                                                       
                    StructureName: "ZADOS_GRAINS_SETTLEMENT_GROUP"                                                                                                                                                                                             
                }, {                                                                                                                                                                                                                                           
                    success: function (oData) {                                                                                                                                                                                                                
                        let error = this.fillMessagesModel()                                                                                                                                                                                                   
                        this.MessageBarChangeVisible(true)                                                                                                                                                                                                     
                        MessageToast.show("Processo executado com sucesso!")                                                                                                                                                                                   
                        this.byId('SmartTableFixations').rebindTable(true);                                                                                                                                                                                    
                        sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                      
                    }.bind(this),                                                                                                                                                                                                                              
                    error: function () {                                                                                                                                                                                                                       
                        let error = this.fillMessagesModel()                                                                                                                                                                                                   
                        this.MessageBarChangeVisible(true)                                                                                                                                                                                                     
                        MessageToast.show("Aconteceram erros no processo, visualizar mensagens")                                                                                                                                                               
                        sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                      
                    }.bind(this)                                                                                                                                                                                                                               
                })                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            }).catch(() => {                                                                                                                                                                                                                                   
                MessageBox.show("Usuário não possui permissão para realizar o registro da fatura", {                                                                                                                                                           
                    icon: MessageBox.Icon.INFORMATION,                                                                                                                                                                                                         
                    title: "Aviso"                                                                                                                                                                                                                             
                })                                                                                                                                                                                                                                             
            })                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onInvoicePostManually: function (oEvent) {                                                                                                                                                                                                             
            debugger                                                                                                                                                                                                                                           
            let oObject = oEvent.getSource().getBindingContext().getObject()                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            let Authorization = {                                                                                                                                                                                                                              
                Company_Code: oObject.CompanyCode,                                                                                                                                                                                                             
                Plant: oObject.Plant,                                                                                                                                                                                                                          
                Authorization: "FIX_LIQ"                                                                                                                                                                                                                       
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            this.authValidate(Authorization).then(() => {                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                this.callTransaction("SupplierInvoice", "displayAdvanced", {                                                                                                                                                                                   
                    SupplierInvoice: oObject.InvoiceDoc,                                                                                                                                                                                                       
                    FiscalYear: oObject.InvoiceDocYear,                                                                                                                                                                                                        
                });                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
            }).catch(() => {                                                                                                                                                                                                                                   
                MessageBox.show("Usuário não possui permissão para realizar o registro da fatura", {                                                                                                                                                           
                    icon: MessageBox.Icon.INFORMATION,                                                                                                                                                                                                         
                    title: "Aviso"                                                                                                                                                                                                                             
                })                                                                                                                                                                                                                                             
            })                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
    });                                                                                                                                                                                                                                                        
});                                                                                                                                                                                                                                                            
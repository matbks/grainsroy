sap.ui.define([                                                                                                                                                                                                                                                
    "./BaseController",                                                                                                                                                                                                                                        
    "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                             
    "../model/formatter",                                                                                                                                                                                                                                      
    "sap/m/library",                                                                                                                                                                                                                                           
    "sap/ui/Device",                                                                                                                                                                                                                                           
    'sap/m/MessagePopover',                                                                                                                                                                                                                                    
    'sap/m/MessageItem',                                                                                                                                                                                                                                       
    'sap/m/MessageToast',                                                                                                                                                                                                                                      
], function (BaseController, JSONModel, formatter, mobileLibrary, Device, MessagePopover, MessageItem, MessageToast) {                                                                                                                                         
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    // shortcut for sap.m.URLHelper                                                                                                                                                                                                                            
    var URLHelper = mobileLibrary.URLHelper;                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
    return BaseController.extend("grains.zadograinsacmcontrollingclearingacc.controller.Detail", {                                                                                                                                                             
                                                                                                                                                                                                                                                               
        formatter: formatter,                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        /* =========================================================== */                                                                                                                                                                                      
        /* lifecycle methods                                           */                                                                                                                                                                                      
        /* =========================================================== */                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
        onInit: function () {                                                                                                                                                                                                                                  
            // Model used to manipulate control states. The chosen values make sure,                                                                                                                                                                           
            // detail page is busy indication immediately so there is no break in                                                                                                                                                                              
            // between the busy indication for loading the view's meta data                                                                                                                                                                                    
            var oViewModel = new JSONModel({                                                                                                                                                                                                                   
                busy: false,                                                                                                                                                                                                                                   
                delay: 0,                                                                                                                                                                                                                                      
                lineItemListTitle: this.getResourceBundle().getText("detailLineItemTableHeading"),                                                                                                                                                             
                routeParameters: {},                                                                                                                                                                                                                           
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched, this);                                                                                                                                                             
            this.getRouter().getRoute("detail").attachPatternMatched(this._onObjectMatchedDetail, this);                                                                                                                                                       
                                                                                                                                                                                                                                                               
            this.setModel(oViewModel, "detailView");                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
            this.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));                                                                                                                                                      
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Updates the item count within the line item table's header                                                                                                                                                                                          
         * @param {object} oEvent an event containing the total number of items in the list                                                                                                                                                                    
         * @private                                                                                                                                                                                                                                            
         */                                                                                                                                                                                                                                                    
        onListUpdateFinished: function (oEvent) {                                                                                                                                                                                                              
            var sTitle,                                                                                                                                                                                                                                        
                iTotalItems = oEvent.getParameter("total"),                                                                                                                                                                                                    
                oViewModel = this.getModel("detailView");                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            // only update the counter if the length is final                                                                                                                                                                                                  
            if (this.byId("lineItemsList").getBinding("items").isLengthFinal()) {                                                                                                                                                                              
                if (iTotalItems) {                                                                                                                                                                                                                             
                    sTitle = this.getResourceBundle().getText("detailLineItemTableHeadingCount", [iTotalItems]);                                                                                                                                               
                } else {                                                                                                                                                                                                                                       
                    //Display 'Line Items' instead of 'Line items (0)'                                                                                                                                                                                         
                    sTitle = this.getResourceBundle().getText("detailLineItemTableHeading");                                                                                                                                                                   
                }                                                                                                                                                                                                                                              
                oViewModel.setProperty("/lineItemListTitle", sTitle);                                                                                                                                                                                          
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /* =========================================================== */                                                                                                                                                                                      
        /* begin: internal methods                                     */                                                                                                                                                                                      
        /* =========================================================== */                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Binds the view to the object path and expands the aggregated line items.                                                                                                                                                                            
         * @function                                                                                                                                                                                                                                           
         * @param {sap.ui.base.Event} oEvent pattern match event in route 'object'                                                                                                                                                                             
         * @private                                                                                                                                                                                                                                            
         */                                                                                                                                                                                                                                                    
        _onObjectMatched: function (oEvent) {                                                                                                                                                                                                                  
            var oModel = this.getView().getModel();                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
            var oViewModel = this.getView().getModel("detailView");                                                                                                                                                                                            
            var oActualSettlementInvoiceModel = this.getOwnerComponent().getModel("actualSettlementInvoice");                                                                                                                                                  
            var oActualSettlementInvoiceModelData = oActualSettlementInvoiceModel.getData();                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            var oRouteParameters = oEvent.getParameter("arguments");                                                                                                                                                                                           
            oViewModel.setProperty("/routeParameters", oRouteParameters);                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            oActualSettlementInvoiceModelData.TradingContract = oRouteParameters.TradingContract;                                                                                                                                                              
            oActualSettlementInvoiceModelData.AbdNumber = oRouteParameters.AbdNumber;                                                                                                                                                                          
            oActualSettlementInvoiceModel.refresh();                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            this.getModel("appView").setProperty("/layout", "TwoColumnsMidExpanded");                                                                                                                                                                          
            oModel.metadataLoaded().then(function () {                                                                                                                                                                                                         
                var sDetailPath = oModel.createKey("/ZADOC_GRAINS_CTR_APP_INV_SD", {                                                                                                                                                                           
                    TradingContract: oRouteParameters.TradingContract,                                                                                                                                                                                         
                    AbdNumber: oRouteParameters.AbdNumber,                                                                                                                                                                                                     
                });                                                                                                                                                                                                                                            
                this._bindView(sDetailPath);                                                                                                                                                                                                                   
            }.bind(this));                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _onObjectMatchedDetail: function (oEvent) {                                                                                                                                                                                                            
            var oModel = this.getView().getModel();                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
            var oViewModel = this.getView().getModel("detailView");                                                                                                                                                                                            
            var oActualSettlementInvoiceModel = this.getOwnerComponent().getModel("actualSettlementInvoice");                                                                                                                                                  
            var oActualSettlementInvoiceModelData = oActualSettlementInvoiceModel.getData();                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            var oRouteParameters = oEvent.getParameter("arguments");                                                                                                                                                                                           
            oViewModel.setProperty("/routeParameters", oRouteParameters);                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            oActualSettlementInvoiceModelData.TradingContract = oRouteParameters.TradingContract;                                                                                                                                                              
            oActualSettlementInvoiceModelData.AbdNumber = oRouteParameters.AbdNumber;                                                                                                                                                                          
            oActualSettlementInvoiceModel.refresh();                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
            this.getModel("appView").setProperty("/layout", "ThreeColumnsMidExpanded");                                                                                                                                                                        
            oModel.metadataLoaded().then(function () {                                                                                                                                                                                                         
                var sDetailPath = oModel.createKey("/ZADOC_GRAINS_CTR_APP_INV_SD", {                                                                                                                                                                           
                    TradingContract: oRouteParameters.TradingContract,                                                                                                                                                                                         
                    AbdNumber: oRouteParameters.AbdNumber,                                                                                                                                                                                                     
                });                                                                                                                                                                                                                                            
                this._bindView(sDetailPath);                                                                                                                                                                                                                   
            }.bind(this));                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Binds the view to the object path. Makes sure that detail view displays                                                                                                                                                                             
         * a busy indicator while data for the corresponding element binding is loaded.                                                                                                                                                                        
         * @function                                                                                                                                                                                                                                           
         * @param {string} sObjectPath path to the object to be bound to the view.                                                                                                                                                                             
         * @private                                                                                                                                                                                                                                            
         */                                                                                                                                                                                                                                                    
        _bindView: function (sDetailPath) {                                                                                                                                                                                                                    
            // Set busy indicator during view binding                                                                                                                                                                                                          
            var oViewModel = this.getModel("detailView");                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            // If the view was not bound yet its not busy, only if the binding requests data it is set to busy again                                                                                                                                           
            oViewModel.setProperty("/busy", false);                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
            this.getView().bindElement({                                                                                                                                                                                                                       
                path: sDetailPath,                                                                                                                                                                                                                             
                events: {                                                                                                                                                                                                                                      
                    change: this._onBindingChange.bind(this),                                                                                                                                                                                                  
                    dataRequested: function (oEvent) {                                                                                                                                                                                                         
                        oViewModel.setProperty("/busy", true);                                                                                                                                                                                                 
                    },                                                                                                                                                                                                                                         
                    dataReceived: function (oEvent) {                                                                                                                                                                                                          
                        oViewModel.setProperty("/busy", false);                                                                                                                                                                                                
                    }.bind(this)                                                                                                                                                                                                                               
                }                                                                                                                                                                                                                                              
            });                                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _onBindingChange: function (oEvent) {                                                                                                                                                                                                                  
            var oView = this.getView(),                                                                                                                                                                                                                        
                oElementBinding = oView.getElementBinding();                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            // No data for the binding                                                                                                                                                                                                                         
            if (!oElementBinding.getBoundContext()) {                                                                                                                                                                                                          
                this.getRouter().getTargets().display("detailObjectNotFound");                                                                                                                                                                                 
                // if object could not be found, the selection in the list                                                                                                                                                                                     
                // does not make sense anymore.                                                                                                                                                                                                                
                this.getOwnerComponent().oListSelector.clearMasterListSelection();                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var sPath = oElementBinding.getPath();                                                                                                                                                                                                             
            var oResourceBundle = this.getResourceBundle();                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
            var oViewModel = this.getView().getModel("detailView");                                                                                                                                                                                            
            var oRouteParameters = oViewModel.getProperty("/routeParameters");                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            var oModel = this.getView().getModel();                                                                                                                                                                                                            
            var sDetailPath = oModel.createKey("/ZADOC_GRAINS_CTR_APP_INV_SD", {                                                                                                                                                                               
                TradingContract: oRouteParameters.TradingContract,                                                                                                                                                                                             
                AbdNumber: oRouteParameters.AbdNumber,                                                                                                                                                                                                         
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            this.getOwnerComponent().oListSelector.selectAListItem(sDetailPath);                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            if (oRouteParameters.AbdItem) {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
                var sDetailDetailPath = oModel.createKey("/ZADOC_GRAINS_CTR_APP_INV_IV", {                                                                                                                                                                     
                    TradingContract: oRouteParameters.TradingContract,                                                                                                                                                                                         
                    AbdNumber: oRouteParameters.AbdNumber,                                                                                                                                                                                                     
                    AbdItem: oRouteParameters.AbdItem,                                                                                                                                                                                                         
                });                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                this.byId('smartTableInvoiceItems').getTable().setSelectedContextPaths([sDetailDetailPath]);                                                                                                                                                   
            } else {                                                                                                                                                                                                                                           
                this.byId('smartTableInvoiceItems').getTable().removeSelections();                                                                                                                                                                             
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        _onMetadataLoaded: function () {                                                                                                                                                                                                                       
            // Store original busy indicator delay for the detail view                                                                                                                                                                                         
            var iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),                                                                                                                                                                               
                oViewModel = this.getModel("detailView"),                                                                                                                                                                                                      
                oSmartTableInvoiceItems = this.byId("smartTableInvoiceItems"),                                                                                                                                                                                 
                iOriginalBusyDelay = oSmartTableInvoiceItems.getBusyIndicatorDelay();                                                                                                                                                                          
                                                                                                                                                                                                                                                               
            // Make sure busy indicator is displayed immediately when                                                                                                                                                                                          
            // detail view is displayed for the first time                                                                                                                                                                                                     
            oViewModel.setProperty("/delay", 0);                                                                                                                                                                                                               
            oViewModel.setProperty("/invoiceItemsBusyDelay", 0);                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            oSmartTableInvoiceItems.attachEventOnce("updateFinished", function () {                                                                                                                                                                            
                // Restore original busy indicator delay for line item table                                                                                                                                                                                   
                oViewModel.setProperty("/invoiceItemsBusyDelay", iOriginalBusyDelay);                                                                                                                                                                          
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            // Binding the view will set it to not busy - so the view is always busy if it is not bound                                                                                                                                                        
            oViewModel.setProperty("/busy", true);                                                                                                                                                                                                             
            // Restore original busy indicator delay for the detail view                                                                                                                                                                                       
            oViewModel.setProperty("/delay", iOriginalViewBusyDelay);                                                                                                                                                                                          
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Set the full screen mode to false and navigate to list page                                                                                                                                                                                         
         */                                                                                                                                                                                                                                                    
        onCloseDetailPress: function () {                                                                                                                                                                                                                      
            this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen", false);                                                                                                                                                            
            // No item should be selected on list after detail page is closed                                                                                                                                                                                  
            this.getOwnerComponent().oListSelector.clearMasterListSelection();                                                                                                                                                                                 
            this.getRouter().navTo("list");                                                                                                                                                                                                                    
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Toggle between full and non full screen mode.                                                                                                                                                                                                       
         */                                                                                                                                                                                                                                                    
        toggleFullScreen: function () {                                                                                                                                                                                                                        
            var bFullScreen = this.getModel("appView").getProperty("/actionButtonsInfo/midColumn/fullScreen");                                                                                                                                                 
            this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen", !bFullScreen);                                                                                                                                                     
            if (!bFullScreen) {                                                                                                                                                                                                                                
                // store current layout and go full screen                                                                                                                                                                                                     
                this.getModel("appView").setProperty("/previousLayout", this.getModel("appView").getProperty("/layout"));                                                                                                                                      
                this.getModel("appView").setProperty("/layout", "MidColumnFullScreen");                                                                                                                                                                        
            } else {                                                                                                                                                                                                                                           
                // reset to previous layout                                                                                                                                                                                                                    
                this.getModel("appView").setProperty("/layout", this.getModel("appView").getProperty("/previousLayout"));                                                                                                                                      
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onBeforeRebindInvoiceItems: function (oEvent) {                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onRefreshSmartTable: function (oEvent) {                                                                                                                                                                                                               
            var oSmartTable = oEvent.getSource().getParent().getParent();                                                                                                                                                                                      
            oSmartTable.rebindTable();                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onSelectionChangeInvoiceItems: function (oEvent) {                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
            var sObject = oEvent.getSource().getSelectedItem().getBindingContext().getObject();                                                                                                                                                                
                                                                                                                                                                                                                                                               
            var bReplace = !Device.system.phone;                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            this.getModel("appView").setProperty("/layout", "ThreeColumnsMidExpanded");                                                                                                                                                                        
                                                                                                                                                                                                                                                               
            var oViewModel = this.getView().getModel("detailView");                                                                                                                                                                                            
            var oRouteParameters = oViewModel.getProperty("/routeParameters");                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            this.getRouter().navTo("detail", {                                                                                                                                                                                                                 
                TradingContract: sObject.TradingContract,                                                                                                                                                                                                      
                AbdNumber: sObject.AbdNumber,                                                                                                                                                                                                                  
                AbdItem: sObject.AbdItem,                                                                                                                                                                                                                      
            }, bReplace);                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onFullInvoiceItems: function (oEvent) {                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onExecuteClearing: function (oEvent) {                                                                                                                                                                                                                 
            var oActualSettlementInvoiceModel = this.getOwnerComponent().getModel("actualSettlementInvoice");                                                                                                                                                  
            var oActualSettlementInvoiceModelData = oActualSettlementInvoiceModel.getData();                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            var oViewModel = this.getModel("detailView");                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            var sObject = this.getView().getBindingContext().getObject();                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            var settlement_to_clear = [{                                                                                                                                                                                                                       
                contract_num: sObject.TradingContract,                                                                                                                                                                                                         
                invoice: sObject.InvoiceDoc,                                                                                                                                                                                                                   
                test_run: '',                                                                                                                                                                                                                                  
                mode: 'N'                                                                                                                                                                                                                                      
            }];                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            var payload = {                                                                                                                                                                                                                                    
                Action: 'ACC_CLEAR',                                                                                                                                                                                                                           
                StructureName: 'ZADOS_GRAINS_ACC_CLEAR',                                                                                                                                                                                                       
                Json: JSON.stringify(settlement_to_clear)                                                                                                                                                                                                      
            };                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            oViewModel.setProperty("/busy", true);                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
            this.JsonCommunication(payload).then(function (sError, oEvent) {                                                                                                                                                                                   
                oActualSettlementInvoiceModelData.isInicialized = false;                                                                                                                                                                                       
                oActualSettlementInvoiceModel.refresh();                                                                                                                                                                                                       
                this.getView().getModel().refresh();                                                                                                                                                                                                           
                this.onTreeTableRefresh();                                                                                                                                                                                                                     
                oViewModel.setProperty("/busy", false);                                                                                                                                                                                                        
            }.bind(this));                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onCancelClearing: function (oEvent) {                                                                                                                                                                                                                  
            var oActualSettlementInvoiceModel = this.getOwnerComponent().getModel("actualSettlementInvoice");                                                                                                                                                  
            var oActualSettlementInvoiceModelData = oActualSettlementInvoiceModel.getData();                                                                                                                                                                   
                                                                                                                                                                                                                                                               
            var oViewModel = this.getModel("detailView");                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            var sObject = this.getView().getBindingContext().getObject();                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            var clearing_doc_to_reverse = [{                                                                                                                                                                                                                   
                company_code: sObject.InvoiceCompanyCode,                                                                                                                                                                                                      
                clearing_doc: sObject.ClearingDocument,                                                                                                                                                                                                        
                clearing_year: sObject.ClearingDocumentYear,                                                                                                                                                                                                   
                mode: 'N'                                                                                                                                                                                                                                      
            }];                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            var payload = {                                                                                                                                                                                                                                    
                Action: 'CLEAR_REV',                                                                                                                                                                                                                           
                StructureName: 'ZADOS_GRAINS_ACC_CLEAR_REVERSE',                                                                                                                                                                                               
                Json: JSON.stringify(clearing_doc_to_reverse)                                                                                                                                                                                                  
            };                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            oViewModel.setProperty("/busy", true);                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
            this.JsonCommunication(payload).then(function (sError, oEvent) {                                                                                                                                                                                   
                oActualSettlementInvoiceModelData.isInicialized = false;                                                                                                                                                                                       
                oActualSettlementInvoiceModel.refresh();                                                                                                                                                                                                       
                this.onTreeTableRefresh();                                                                                                                                                                                                                     
                this.getView().getModel().refresh();                                                                                                                                                                                                           
                oViewModel.setProperty("/busy", false);                                                                                                                                                                                                        
            }.bind(this));                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onAccountingDocumentPress: function (oEvent) {                                                                                                                                                                                                         
            var oObject = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            this.callTransaction("AccountingDocument", "manage", {                                                                                                                                                                                             
                AccountingDocument: oObject.AccountingDocument,                                                                                                                                                                                                
                FiscalYear: oObject.AccountingDocumentYear,                                                                                                                                                                                                    
                CompanyCode: oObject.InvoiceCompanyCode,                                                                                                                                                                                                       
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        onClearingDocumentPress: function (oEvent) {                                                                                                                                                                                                           
            var oObject = oEvent.getSource().getBindingContext().getObject();                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            this.callTransaction("AccountingDocument", "manage", {                                                                                                                                                                                             
                AccountingDocument: oObject.ClearingDocument,                                                                                                                                                                                                  
                FiscalYear: oObject.ClearingDocumentYear,                                                                                                                                                                                                      
                CompanyCode: oObject.InvoiceCompanyCode,                                                                                                                                                                                                       
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
    });                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
});                                                                                                                                                                                                                                                            
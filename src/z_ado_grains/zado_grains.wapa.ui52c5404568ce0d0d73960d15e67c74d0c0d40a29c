sap.ui.define([                                                                                                                                                                                                                                                
  "./BaseController",                                                                                                                                                                                                                                          
  'sap/m/Dialog',                                                                                                                                                                                                                                              
  'sap/m/MessageView',                                                                                                                                                                                                                                         
  "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                               
  "sap/m/MessagePopover",                                                                                                                                                                                                                                      
  "sap/m/Button",                                                                                                                                                                                                                                              
  "sap/m/MessageItem"                                                                                                                                                                                                                                          
],                                                                                                                                                                                                                                                             
  function (                                                                                                                                                                                                                                                   
    BaseController,                                                                                                                                                                                                                                            
    Dialog,                                                                                                                                                                                                                                                    
    MessageView,                                                                                                                                                                                                                                               
    JSONModel,                                                                                                                                                                                                                                                 
    MessagePopover,                                                                                                                                                                                                                                            
    Button,                                                                                                                                                                                                                                                    
    MessageItem) {                                                                                                                                                                                                                                             
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
    return BaseController.extend("grains.zadograinsacmcontrolling.controller.App", {                                                                                                                                                                           
      onInit() {                                                                                                                                                                                                                                               
        this.initMessageProcessor()                                                                                                                                                                                                                            
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      onCloseMessageBar: function (oEvent) {                                                                                                                                                                                                                   
        this.MessageBarChangeVisible(false)                                                                                                                                                                                                                    
      },                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
      onOpenMessageBox: function (oEvent) {                                                                                                                                                                                                                    
        if (!this._messagePopover) {                                                                                                                                                                                                                           
          this._messagePopover = new MessagePopover({                                                                                                                                                                                                          
            headerButton: new sap.m.Button({                                                                                                                                                                                                                   
              text: 'Limpar',                                                                                                                                                                                                                                  
              press: function () {                                                                                                                                                                                                                             
                this.getOwnerComponent().getModel("MessagesModel").oData.Messages = []                                                                                                                                                                         
                this.clearMessageManager()                                                                                                                                                                                                                     
                this._messagePopover.close()                                                                                                                                                                                                                   
                this.MessageBarChangeVisible(false)                                                                                                                                                                                                            
              }.bind(this),                                                                                                                                                                                                                                    
            }),                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            items: {                                                                                                                                                                                                                                           
              path: "MessagesModel>/Messages/",                                                                                                                                                                                                                
              template: new sap.m.MessageItem({                                                                                                                                                                                                                
                description: "{MessagesModel>description}",                                                                                                                                                                                                    
                type: "{MessagesModel>type}",                                                                                                                                                                                                                  
                title: "{MessagesModel>message}",                                                                                                                                                                                                              
                subtitle: "{MessagesModel>additionalText}"                                                                                                                                                                                                     
              }),                                                                                                                                                                                                                                              
            },                                                                                                                                                                                                                                                 
            afterClose: function () {                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
            }                                                                                                                                                                                                                                                  
          })                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
          oEvent.getSource().addDependent(this._messagePopover);                                                                                                                                                                                               
        }                                                                                                                                                                                                                                                      
        this._messagePopover.toggle(oEvent.getSource());                                                                                                                                                                                                       
      }                                                                                                                                                                                                                                                        
    });                                                                                                                                                                                                                                                        
  }                                                                                                                                                                                                                                                            
);                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               